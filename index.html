<!doctype html>
<html>
    <head>
        <title>jIRCs Test</title>
        <link rel="stylesheet" type="text/css" href="jircs.css" />
        <script src="http://cdn.sockjs.org/sockjs-0.3.min.js"></script>
        <script src="jircs.js"></script>
        <script src="utils.js"></script>
        <script src="gui2.js"></script>
        <script src="irc_commands.js"></script>
        <script src="user_commands.js"></script>
        <script src="ctcp_commands.js"></script>
        <script>
            function randrange(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; };
            var irc = new jIRCs(new SockJS("http://dbtest.fugiman.com:8080/"));
            irc.nick('jIRCs-' + randrange(1000,9999));
            
            window.onbeforeunload = function(e) {
                var message = "Are you sure you want to leave?";
                e = e || window.event;
                if (e) {
                    e.returnValue = message;
                }
                return message;
            };
            
            window.onresize = function() {
                var h = 460;
                if (document.body && document.body.offsetHeight) {
                    h = document.body.offsetHeight;
                }
                if (document.compatMode=='CSS1Compat' && document.documentElement && document.documentElement.offsetHeight) {
                    h = document.documentElement.offsetHeight;
                }
                if (window.innerHeight) {
                    h = window.innerHeight;
                }
                document.getElementById("jircs").style.height = (h - 16) + "px";
                irc.forEach(irc.displays, irc.render, irc);
            };
        </script>
    </head>
    <body> 
        <div id="jircs">
            <script>window.onresize();</script>
            <script>irc.display();</script>
        </div>
    </body>
</html>
